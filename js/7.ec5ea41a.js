(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"4f93":function(t,o,e){"use strict";e.r(o);var a=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"q-pa-md"},[e("q-header",{staticStyle:{"margin-top":"50px"},attrs:{elevated:"",color:"red"}},[e("div",{staticClass:"q-pa-sm q-pl-md row items-center"},[e("div",{staticClass:"cursor-pointer non-selectable"},[t._v("\n        Archivo\n        "),e("q-menu",[e("q-list",{staticStyle:{"min-width":"100px"},attrs:{dense:""}},[e("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""}},[e("q-item-section",[t._v("Abrir...")])],1),e("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""}},[e("q-item-section",[t._v("Nuevo")])],1),e("q-separator"),e("q-item",{attrs:{clickable:""}},[e("q-item-section",[t._v("Preferences")]),e("q-item-section",{attrs:{side:""}},[e("q-icon",{attrs:{name:"keyboard_arrow_right"}})],1),e("q-menu",{attrs:{anchor:"top right",self:"top left"}},[e("q-list",t._l(3,(function(o){return e("q-item",{key:o,attrs:{dense:"",clickable:""}},[e("q-item-section",[t._v("Submenu Label")]),e("q-item-section",{attrs:{side:""}},[e("q-icon",{attrs:{name:"keyboard_arrow_right"}})],1),e("q-menu",{attrs:{"auto-close":"",anchor:"top right",self:"top left"}},[e("q-list",t._l(3,(function(o){return e("q-item",{key:o,attrs:{dense:"",clickable:""}},[e("q-item-section",[t._v("3rd level Label")])],1)})),1)],1)],1)})),1)],1)],1),e("q-separator"),e("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""}},[e("q-item-section",[t._v("Quit")])],1)],1)],1)],1),e("div",{staticClass:"q-ml-md cursor-pointer non-selectable"},[t._v("\n        Edit\n        "),e("q-menu",{attrs:{"auto-close":""}},[e("q-list",{staticStyle:{"min-width":"100px"},attrs:{dense:""}},[e("q-item",{attrs:{clickable:""}},[e("q-item-section",[t._v("Cut")])],1),e("q-item",{attrs:{clickable:""}},[e("q-item-section",[t._v("Copy")])],1),e("q-item",{attrs:{clickable:""}},[e("q-item-section",[t._v("Paste")])],1),e("q-separator"),e("q-item",{attrs:{clickable:""}},[e("q-item-section",[t._v("Select All")])],1)],1)],1)],1),e("div",{staticClass:"col-1"}),e("q-slider",{staticClass:"col-2",attrs:{min:.1,max:2,step:.1,color:"white",label:!0,"label-value":"TamaÃ±o","label-color":"blue"},model:{value:t.tamano,callback:function(o){t.tamano=o},expression:"tamano"}})],1)]),e("q-page-container",[e("q-page",{staticClass:"q-pa-md"},[e("p",{staticClass:"estatico"},[t._v("\n        "+t._s(t.cambiarTamano)+" "+t._s(t.x)+":"+t._s(t.y)+" "+t._s(t.teclaPresionada)+"\n      ")]),e("div",{staticClass:"q-gutter-y-md caja-de-herramientas"},[e("q-card",[e("q-tabs",{staticClass:"bg-grey-3 text-grey-7",attrs:{dense:"","active-color":"primary","indicator-color":"purple",align:"justify"},model:{value:t.tab,callback:function(o){t.tab=o},expression:"tab"}},[e("q-tab",{attrs:{name:"principal",label:"Principal"}}),e("q-tab",{attrs:{name:"marcas",label:"Marcas"}}),e("q-tab",{attrs:{name:"otros",label:"--/--"}})],1),e("q-tab-panels",{staticClass:"bg-grey-3 text-black row",attrs:{animated:""},model:{value:t.tab,callback:function(o){t.tab=o},expression:"tab"}},[e("q-tab-panel",{staticClass:"q-pa-md",attrs:{name:"principal"}},[e("q-icon",{staticClass:"text-brown cursor-pointer color-selector-fijo",attrs:{name:"palette"}},[e("q-popup-proxy",{attrs:{"transition-show":"flip-down","transition-hide":"flip-down"}},[e("q-color",{staticClass:"my-picker",attrs:{"format-model":"rgba"},on:{input:t.cambiarColorSelccionados},model:{value:t.rgba,callback:function(o){t.rgba=o},expression:"rgba"}})],1)],1),e("q-btn",{attrs:{padding:"none",color:"secondary",icon:t.reproductor?"pause":"play_arrow"},on:{click:function(o){t.otro(),t.reproductor=!t.reproductor}}}),e("q-btn",{attrs:{padding:"none",color:"primary",icon:"skip_previous"},on:{click:t.audioStop}}),e("q-fab",{attrs:{padding:"10px",round:"",color:"red-3",icon:"delete_forever"},on:{click:t.elimianrDeClick}}),e("q-fab",{attrs:{padding:"10px",round:"",color:t.bloqueado?"green":"red",icon:t.bloqueadoIcono},on:{click:t.bloquear}}),e("q-fab",{attrs:{padding:"10px",round:"",color:"brown-6",icon:"invert_colors"},on:{click:t.restaurarColor}}),e("q-fab",{attrs:{padding:"10px",round:"",color:"secondary",icon:"control_camera"},on:{click:function(o){t.cuadrosHeramienta=!t.cuadrosHeramienta,t.agregarMarcaBool=!1}}})],1),e("q-tab-panel",{attrs:{name:"marcas"}},[e("q-fab",{attrs:{padding:"10px",color:"primary",icon:"bookmark_border"},on:{click:function(o){t.agregarMarcaBool=!t.agregarMarcaBool,t.cuadrosHeramienta=!1}}}),e("q-fab",{attrs:{padding:"10px",color:"red-3",icon:"cleaning_services"},on:{click:t.vaciarMarcas}}),e("q-color",{staticClass:"my-picker segundapaleta",attrs:{"no-header":"","no-footer":"","default-view":"palette",palette:["#019A9D","#D9B801","#E8045A","#B2028A","#2A0449","#019A9D"]},model:{value:t.rgba,callback:function(o){t.rgba=o},expression:"rgba"}})],1),e("q-tab-panel",{attrs:{name:"otros"}},[e("q-btn-toggle",{attrs:{push:"",rounded:"",color:"brown","toggle-color":"green-5",options:[{value:"texto",slot:"one"},{value:"",slot:"two"}]},scopedSlots:t._u([{key:"one",fn:function(){return[e("div",{staticClass:"row items-center no-wrap"},[e("q-icon",{attrs:{right:"",name:"text_format"}})],1)]},proxy:!0},{key:"two",fn:function(){return[e("div",{staticClass:"row items-center no-wrap"},[e("q-icon",{attrs:{right:"",name:"crop_square"}})],1)]},proxy:!0}]),model:{value:t.teclaPresionada,callback:function(o){t.teclaPresionada=o},expression:"teclaPresionada"}})],1)],1)],1)],1),e("div",{staticClass:"espaciador-header-canvas"}),e("div",{attrs:{id:"lienzo"},on:{dblclick:t.crearObjeto,click:t.cambiarColor}},[t._l(t.objetos,(function(o,a){return e("vue-draggable-resizable",{key:a,staticClass:"objetos",style:{"background-color":o.color,"box-shadow":o.sombra,border:"none"},attrs:{handles:o.handles,draggable:o.bloqueado,resizable:o.resizable,"data-id":a,"data-left":o.left,w:o.width,h:o.height,x:o.left,y:o.top,parent:!1,color:"primary"},on:{activated:function(e){t.seleccionar(a,o.tipo),t.asignarColorAnterior(o.color)},resizing:t.onResize,dragging:t.onDrag,dragstop:function(o){return t.actualizarPosicion(a)},resizestop:function(o){return t.actualizarTamano(a)},dblclick:function(e){return t.asignarColorAnterior(o.color)}}},[o.marca?e("div",{staticClass:"marca"}):t._e()])})),t._l(t.textos,(function(o,a){return e("vue-draggable-resizable",{key:a+1e3,staticClass:"cursor-pointer textos",style:{"background-color":o.color,"box-shadow":o.sombra,border:o.borde,"font-size":o.tamano+"px"},attrs:{x:o.left,y:o.top,w:"auto",h:"auto",resizable:!1,color:"primary","text-color":"white",unelevated:"","no-caps":""},on:{activated:function(e){t.seleccionar(a,o.tipo),t.asignarColorAnterior(o.color)}}},[t._v("\n          "+t._s(o.texto)+"\n          "),e("q-popup-edit",{attrs:{cover:!1,offset:[0,10]},model:{value:o.texto,callback:function(e){t.$set(o,"texto",e)},expression:"item.texto"}},[e("q-input",{attrs:{color:"accent",dense:"",autofocus:"",counter:""},on:{click:t.cambiarColor},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"text_format",color:"accent"}})]},proxy:!0}],null,!0),model:{value:o.texto,callback:function(e){t.$set(o,"texto",e)},expression:"item.texto"}})],1)],1)})),t._l(t.numeroDePaginas,(function(t,o){return e("canvas",{key:o+9e4,staticClass:"canvasUno",attrs:{id:"canvas"+o}})}))],2),t.agregarMarcaBool?e("q-page-sticky",{staticClass:"botonAgregarEstatico",attrs:{position:"bottom-right",offset:[150,15]},on:{click:t.cambiarMarcaBool}},[e("q-fab",{attrs:{icon:"add",color:"accent"}})],1):t._e(),t.cuadrosHeramienta?e("q-page-sticky",{staticClass:"botonAgregarEstatico",attrs:{glossy:!1,square:!0,"hide-label":!1,position:"bottom-right",offset:[90,18]}},[e("q-btn",{attrs:{padding:"10px",color:"primary",fab:"",icon:"remove"},on:{click:t.reducirWidth}}),e("q-fab",{attrs:{icon:"control_point_duplicate",color:"accent"},on:{click:t.duplicarObjeto}}),e("q-btn",{attrs:{padding:"10px",color:"primary",fab:"",icon:"add"},on:{click:t.aumentarWidth}})],1):t._e()],1)],1)],1)},i=[],s=e("c973"),r=e.n(s),n=e("2b0e"),c=e("fb19"),l=e.n(c);e("278f"),e("2ef0");n["a"].component("vue-draggable-resizable",l.a);var d="pdfs/canon.pdf",h={data(){return{colorAnterior:"rgba(172,196,165,0.37)",color1:"rgba(175,184,204,0.49)",color2:"rgba(255,255,255,0)",color3:"rgba(172,196,165,0.37)",color4:"",cuadrosHeramienta:!1,ultimaDistanciaPantalla:0,lienzo:null,agregarMarcaBool:!1,ultimoObjetoCreado:{},bloqueadoIcono:"lock_open",bloqueado:!0,tab:"principal",primero:0,segundo:0,audio:document.createElement("AUDIO"),reproductor:!1,sonido:"",duracion:0,duracionExacta:0,duracionMarcas:[],x:null,y:null,width:null,height:null,objetosCopiados:[],teclaPresionada:"",rgba:"",pdfs:{canon:"pdfs/canon.pdf"},tamano:1.5,documento:{tamano:1},doc:null,page:null,numeroDePaginas:null,objetos:[],seleccionados:[],seleccionadosTexto:[],textos:[]}},mounted(){localStorage.getItem("tamano")&&(this.tamano=localStorage.getItem("tamano")),localStorage.getItem("objetos")&&(this.objetos=JSON.parse(localStorage.getItem("objetos"))),localStorage.getItem("textos")&&(this.textos=JSON.parse(localStorage.getItem("textos"))),localStorage.getItem("duracionMarcas")&&(this.duracionMarcas=JSON.parse(localStorage.getItem("duracionMarcas")))},created(){var t=this;return r()((function*(){t.audio.src="sonidos/canon.mp3",t.addListeners2(),t.crearPDF(t.tamano),t.addListeners()}))()},computed:{cambiarTamano(){return this.crearPDF(this.tamano),this.tamano}},methods:{vaciarMarcas:function(){this.duracionMarcas=[],this.objetos.foreach(t=>{t.marca=!1})},cambiarMarcaBool:function(){this.agregarMarca()},bloquear:function(){console.log(this.bloqueado),0==this.bloqueado&&(this.objetos.forEach(t=>{t.bloqueado=!0,t.resizable=!0}),this.bloqueadoIcono="lock_open"),1==this.bloqueado&&(this.objetos.forEach(t=>{t.bloqueado=!1,t.resizable=!1}),this.bloqueadoIcono="lock"),this.bloqueado=!this.bloqueado},agregarMarca:function(){var t=this.duracionExacta;this.duracionMarcas.push(t),localStorage.setItem("duracionMarcas",JSON.stringify(this.duracionMarcas));this.duracionMarcas.lenght;console.log("ESTO ES DE MARCAS",this.duracionMarcas.length),this.duracionMarcas.length>0&&(this.objetos[this.duracionMarcas.length-1].marca=!0)},addListeners2:function(){console.log("adding listeners"),this.audio.addEventListener("timeupdate",this.nuevoNumero,!1)},nuevoNumero:function(){if(this.duracionExacta=this.audio.currentTime,this.duracion=Math.round(this.audio.currentTime/this.audio.duration*100),this.duracionExacta>=this.duracionMarcas[this.primero]){this.objetos[this.primero].color=this.color1;var t=this.objetos[this.primero].left-15,o=this.ultimaDistanciaPantalla,e=document.getElementsByClassName("objetos"),a=e[this.primero].getBoundingClientRect();console.log(a.left),(a.left>280||a.left<-100)&&(o=t,this.ultimaDistanciaPantalla=t),window.scroll({top:this.objetos[this.primero].top-35,left:o,behavior:"smooth"}),this.primero>0&&(this.objetos[this.primero-1].color=this.color2),setTimeout(()=>{this.primero++},50)}console.log(parseFloat(this.duracionExacta).toFixed(1))},audioStop:function(){this.audio.currentTime=0,this.primero=0,this.objetos.forEach(t=>{t.color=this.color2,t.marca=!1})},otro(){this.reproductor?this.audio.pause():(this.sonido,this.audio.play()),console.log("otro reproductor")},nuevo:function(t,o){console.log(t,o)},onResize:function(t,o,e,a){this.x=t,this.y=o,this.width=e,this.height=a},actualizarTamano(t){null!=this.x&&(this.objetos[t].left=this.x,this.objetos[t].top=this.y,this.objetos[t].width=this.width,this.objetos[t].height=this.height,this.ultimoObjetoCreado={bloqueado:!0,tipo:"cuadro",dato:"uno",id:this.objetos.length,top:this.y,left:this.x+this.width,width:this.width,height:this.height,color:this.colorAnterior,seleccionado:!1,sombra:"none"},this.x=null,this.y=null,this.width=null,this.height=null)},duplicarObjeto:function(){localStorage.setItem("tamano",JSON.stringify(this.tamano));var t={marca:!1,handles:["mr","ml"],bloqueado:!1,resizable:!0,tipo:this.ultimoObjetoCreado.tipo,dato:this.ultimoObjetoCreado.dato,id:this.ultimoObjetoCreado.id,top:this.ultimoObjetoCreado.top,left:this.ultimoObjetoCreado.left,width:this.ultimoObjetoCreado.width,height:this.ultimoObjetoCreado.height,color:this.ultimoObjetoCreado.color,seleccionado:this.ultimoObjetoCreado.seleccionado,sombra:"none"};this.objetos.push(t),t={};var o=this.ultimoObjetoCreado.left+this.ultimoObjetoCreado.width;this.ultimoObjetoCreado.left=o,o=null,localStorage.setItem("objetos",JSON.stringify(this.objetos))},actualizarPosicion(t){null!=this.x&&(this.objetos[t].left=this.x,this.objetos[t].top=this.y,this.x=null,this.y=null)},onDrag:function(t,o){this.x=t,this.y=o},copiarObjetos:function(t){this.objetosCopiados=[],console.log("copiado:");for(let o=0;o<this.objetos.length;o++)1==this.objetos[o].seleccionado&&this.objetosCopiados.push(this.objetos[o]);console.log(this.objetosCopiados)},pegarObjetos:function(t){for(let e=0;e<this.objetosCopiados.length;e++)if("cuadro"==this.objetosCopiados[e].tipo){var o=this.objetosCopiados[e];this.objetos.push(o),console.log(this.objetosCopiados[e])}setTimeout(()=>{},50)},asignarColorAnterior(t){this.colorAnterior=t,this.rgba=t},cambiarColorSelccionados(){for(let t=0;t<this.objetos.length;t++)1==this.objetos[t].seleccionado&&(this.objetos[t].color=this.rgba);for(let t=0;t<this.textos.length;t++)1==this.textos[t].seleccionado&&(this.textos[t].color=this.rgba);this.colorAnterior=this.rgba},addListeners:function(){console.log("adding listeners"),window.addEventListener("keydown",this.eliminar,!1)},restaurarColor:function(){this.objetos.forEach(t=>{t.color=this.color3});for(let t=0;t<this.duracionMarcas.length;t++)this.objetos[t].marca=!0},cambiarColor:function(t){localStorage.setItem("objetos",JSON.stringify(this.objetos)),localStorage.setItem("textos",JSON.stringify(this.textos)),localStorage.setItem("duracionMarcas",JSON.stringify(this.duracionMarcas)),console.log(t.target.classList.contains("objetos")),t.target!=this&&t.target.classList.contains("objetos")?console.log("no diste click en lienzo"):(console.log(this.objetos),this.objetos.forEach(t=>{t.borde="none",t.seleccionado=!1,t.sombra="none"}),this.seleccionados=[],this.textos.forEach(t=>{t.borde="none",t.seleccionado=!1,t.sombra="none"}))},deDrag:function(){var t=this.onDrag();console.log("esto es el dato:",t)},seleccionar(t,o){console.log("esto es de seleccionar"),"cuadro"==o&&(console.log(t),this.objetos[t].sombra="inset 0px 0px 4px 1px rgba(0,0,0,1)",this.objetos[t].seleccionado=!0,console.log("esto es lo que vale currentTime: ",this.audio.currentTime),this.duracionMarcas.length>0&&(this.audio.currentTime=this.duracionMarcas[t],this.duracionExacta=this.audio.currentTime),this.primero=t,this.ultimaDistanciaPantalla=this.objetos[t].left-20),"texto"==o&&(console.log("esto es un texto"),this.textos[t].sombra="0px 2px 6px 4px rgba(129,209,117,0.65)",this.textos[t].seleccionado=!0)},elimianrDeClick:function(){for(let t=0;t<this.objetos.length;t++)0==this.objetos[t].seleccionado&&this.seleccionados.push(this.objetos[t]);this.objetos=this.seleccionados,this.seleccionados=[];for(let t=0;t<this.textos.length;t++)0==this.textos[t].seleccionado&&this.seleccionadosTexto.push(this.textos[t]);this.textos=this.seleccionadosTexto,this.seleccionadosTexto=[]},aumentarWidth:function(){this.objetos[this.objetos.length-1].width=this.objetos[this.objetos.length-1].width+1,this.ultimoObjetoCreado.width=this.ultimoObjetoCreado.width+1,this.ultimoObjetoCreado.left=this.ultimoObjetoCreado.left+1},reducirWidth:function(){this.objetos[this.objetos.length-1].width=this.objetos[this.objetos.length-1].width-1,this.ultimoObjetoCreado.width=this.ultimoObjetoCreado.width-1,this.ultimoObjetoCreado.left=this.ultimoObjetoCreado.left-1},eliminar:function(t){if(console.log("tecla presionada: "+t.keyCode),84==t.keyCode&&(this.teclaPresionada="texto"),76==t.keyCode&&this.agregarMarca(),32==t.keyCode&&(t.preventDefault(),this.reproductor?this.audio.pause():(this.sonido,this.audio.play()),this.reproductor=!this.reproductor),68==t.keyCode&&(this.objetos[this.objetos.length-1].width=this.objetos[this.objetos.length-1].width+1,this.ultimoObjetoCreado.width=this.ultimoObjetoCreado.width+1,this.ultimoObjetoCreado.left=this.ultimoObjetoCreado.left+1),65==t.keyCode&&(this.objetos[this.objetos.length-1].width=this.objetos[this.objetos.length-1].width-1,this.ultimoObjetoCreado.width=this.ultimoObjetoCreado.width-1,this.ultimoObjetoCreado.left=this.ultimoObjetoCreado.left-1),80==t.keyCode&&this.duplicarObjeto(),8==t.keyCode){for(let t=0;t<this.objetos.length;t++)0==this.objetos[t].seleccionado&&this.seleccionados.push(this.objetos[t]);this.objetos=this.seleccionados,this.seleccionados=[],localStorage.setItem("objetos",JSON.stringify(this.objetos));for(let t=0;t<this.textos.length;t++)0==this.textos[t].seleccionado&&this.seleccionadosTexto.push(this.textos[t]);this.textos=this.seleccionadosTexto,this.seleccionadosTexto=[],localStorage.setItem("objetos",JSON.stringify(this.textos))}},oMousePos(t,o){var e=t.getBoundingClientRect();return{x:Math.round(o.clientX-e.left),y:Math.round(o.clientY-e.top)}},crearObjeto:function(t){var o=document.getElementById("lienzo");if(""==this.teclaPresionada){var e=this.oMousePos(o,t);console.log(e);var a={marca:!1,handles:["tl","tm","tr","mr","br","bm","bl","ml"],bloqueado:!0,resizable:!0,tipo:"cuadro",dato:"uno",id:this.objetos.length,top:e.y,left:e.x,width:50,height:50,color:this.colorAnterior,seleccionado:!1,sombra:"none"};this.objetos.push(a),localStorage.setItem("objetos",JSON.stringify(this.objetos)),console.log("esto es de crear objeto")}if("texto"==this.teclaPresionada){e=this.oMousePos(o,t),a={bloqueado:!0,tipo:"texto",top:e.y,left:e.x,borde:"none",color:"green",seleccionado:!1,texto:"Texto",tamano:20,sombra:"none"};this.textos.push(a),localStorage.setItem("textos",JSON.stringify(this.textos)),console.log(t.x+"__"+t.y),setTimeout(()=>{},50)}},crearPDF(t){var o=this;return r()((function*(){o.doc=yield pdfjsLib.getDocument(d),o.numeroDePaginas=o.doc.numPages;for(let r=0;r<o.numeroDePaginas;r++){var e=yield o.doc.getPage(r+1),a=document.getElementById("canvas"+r),i=a.getContext("2d"),s=e.getViewport(t);a.width=s.width,a.height=s.height,e.render({canvasContext:i,viewport:s})}}))()}}},u=h,b=(e("60ef"),e("2877")),m=e("4d5a"),p=e("e359"),g=e("4e73"),f=e("1c1c"),j=e("66e5"),x=e("4074"),q=e("eb85"),C=e("0016"),v=e("c1d0"),y=e("09e3"),w=e("9989"),k=e("f09f"),O=e("429b"),_=e("7460"),S=e("adad"),M=e("823b"),P=e("7cbe"),I=e("b498"),T=e("9c40"),E=e("c294"),Q=e("6a67"),D=e("58ea"),z=e("42a1"),A=e("27f9"),N=e("de5e"),B=e("7f67"),J=e("eebe"),L=e.n(J),F=Object(b["a"])(u,a,i,!1,null,"12446ca2",null);o["default"]=F.exports;L()(F,"components",{QLayout:m["a"],QHeader:p["a"],QMenu:g["a"],QList:f["a"],QItem:j["a"],QItemSection:x["a"],QSeparator:q["a"],QIcon:C["a"],QSlider:v["a"],QPageContainer:y["a"],QPage:w["a"],QCard:k["a"],QTabs:O["a"],QTab:_["a"],QTabPanels:S["a"],QTabPanel:M["a"],QPopupProxy:P["a"],QColor:I["a"],QBtn:T["a"],QFab:E["a"],QBtnToggle:Q["a"],QCircularProgress:D["a"],QPopupEdit:z["a"],QInput:A["a"],QPageSticky:N["a"]}),L()(F,"directives",{ClosePopup:B["a"]})},"60ef":function(t,o,e){"use strict";var a=e("8688"),i=e.n(a);i.a},8688:function(t,o,e){}}]);